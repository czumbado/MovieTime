<!DOCTYPE html>
<html lang="es">
<head>
    <title>Películas</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Agrega los enlaces a los archivos CSS de Bootstrap -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    
    <link href="/css/estilos.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<header>
    <nav>
        <ul>
                <li><a href="/index.html">Inicio</a></li>
                <li><a href="/pelicula">Cartelera</a></li>
                <li><a href="/producto">Productos</a></li>
                <li><a href="#">Iniciar Sesión</a></li>
                <li><a href="/direccion">Direcciones</a></li>
            </ul>
    </nav>
</header>
<div class="container mt-4">
    <div class="card">
        <div class="card-header">
            <h1>Listado de Películas</h1>
        </div>
        <div class="card-body">
            <a href="/pelicula/crear" class="btn btn-success">Crear Nueva Película</a>
            <br><br>
            <table class="table table-striped">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Título</th>
                    <th>Duración</th>
                    <th>Clasificación</th>
                    <th>Fecha</th>
                    <th>Género</th>
                    <th>Idioma</th>
                    <th>Imagen</th> <!-- Cambiamos el encabezado de la columna a "Imagen" -->
                    <th>Acciones</th>
                </tr>
                </thead>
                <tbody>
                <!-- Utiliza la variable "peliculas" que se pasó desde el controlador para generar las filas de la tabla -->
                <tr th:each="pelicula : ${peliculas}">
                    <td th:text="${pelicula.id_pelicula}"></td>
                    <td th:text="${pelicula.pel_titulo}"></td>
                    <td th:text="${pelicula.pel_duracion}"></td>
                    <td th:text="${pelicula.pel_clasificacion}"></td>
                    <td th:text="${pelicula.pel_fecha}"></td>
                    <td th:text="${pelicula.pel_genero}"></td>
                    <td th:text="${pelicula.pel_idioma}"></td>
                    <!-- Agregamos la etiqueta <img> para mostrar la imagen -->
                    <td>
                        <img th:src="@{${pelicula.imagen_url}}" style="max-width: 100px; max-height: 100px;" alt="Imagen de la Película"/>
                    </td>

                    <td>
                        <a th:href="@{/pelicula/editar/{id}(id=${pelicula.id_pelicula})}" class="btn btn-primary">Editar</a>
                        <a th:href="@{/pelicula/eliminar/{id}(id=${pelicula.id_pelicula})}" class="btn btn-danger">Eliminar</a>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Agrega el enlace al archivo JavaScript de Bootstrap (opcional) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
